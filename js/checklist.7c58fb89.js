"use strict";(self["webpackChunkxivtodo"]=self["webpackChunkxivtodo"]||[]).push([[13],{466:function(e,t,s){s.r(t),s.d(t,{default:function(){return me}});var i=s(252),a=s(577),o=s(963);const r={class:"container"},l={class:"d-flex align-items-end"},n={class:"me-auto"},d={key:0,class:"fs-3 fw-lighter"},c={key:0,class:"text-info fs-6"},h=(0,i._)("div",{class:"spinner-border spinner-border-sm",role:"status"},null,-1),m=(0,i._)("hr",null,null,-1),g=(0,i._)("h2",null,"Things to do",-1),u={class:"row"},k={class:"col-md"},D=(0,i._)("h3",null,"Weeklies",-1),p={class:"fw-lighter text-muted"},y={key:0,class:"input-group mt-3 mb-2"},w={class:"list-group list-group-flush"},f=(0,i._)("br",null,null,-1),C={class:"col-md order-first order-md-last"},v=(0,i._)("h3",null,"Dailies",-1),$={class:"fw-lighter text-muted"},_={key:0,class:"input-group mt-3 mb-2"},H={class:"list-group list-group-flush"},b=(0,i._)("br",null,null,-1),T={class:"d-none d-md-block"},x={key:0,class:"text-muted fw-light float-end"},A=(0,i._)("br",null,null,-1),R=(0,i._)("br",null,null,-1),W={key:1,class:"text-muted fw-light float-end"},U=(0,i._)("br",null,null,-1),I=(0,i._)("br",null,null,-1),M={key:2,class:"row"},q={class:"col"},N=(0,i._)("h3",null,"Scratchpad",-1),O=(0,i._)("span",{class:"fw-lighter text-muted"},"Checklist without deadlines",-1),z={key:0,class:"input-group mt-3 mb-2"},j={class:"list-group list-group-flush"},G={key:0,class:"list-group-item"},S=(0,i._)("br",null,null,-1);function V(e,t,s,V,Y,K){const L=(0,i.up)("AlertMsg"),Z=(0,i.up)("ChecklistItem");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("h1",l,[(0,i._)("span",n,[(0,i.Uk)((0,a.zw)(e.$t("page.checklist"))+" ",1),this.$store.getters.hasCharacter?((0,i.wg)(),(0,i.iD)("span",d,[(0,i.Uk)((0,a.zw)(e.$t("message.forCharacter",{characterName:this.$store.getters.character.Name}))+" ",1),this.$store.getters.activeCharacterOutOfDate?((0,i.wg)(),(0,i.iD)("div",c,[h,(0,i.Uk)(" Updating character data, this may take a minute... ")])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),this.$store.getters.hasCharacter?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:(0,a.C_)(["btn float-end",{"btn-outline-success":!Y.showHidden,"btn-success":Y.showHidden}]),onClick:t[0]||(t[0]=e=>Y.showHidden=!Y.showHidden)}," Customize ",2)):(0,i.kq)("",!0)]),this.$store.getters.userData?this.$store.getters.hasCharacter?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(L,{key:1,type:"normal",msg:"No characters found. You can add your characters from the <a href='/settings' class='alert-link'>Settings</a>."})):((0,i.wg)(),(0,i.j4)(L,{key:0,type:"normal",msg:"No characters found. You can <a href='"+this.$store.state.env.VUE_APP_DISCORD_AUTH_URI+"' class='alert-link'>sign in with Discord</a> to add them."},null,8,["msg"])),m,g,(0,i._)("div",u,[(0,i._)("div",k,[D,(0,i._)("span",p,(0,a.zw)(Y.weeklyReset)+" until reset",1),Y.showHidden?((0,i.wg)(),(0,i.iD)("div",y,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>Y.customWeekly=e),type:"text",class:"form-control",placeholder:"Custom weekly"},null,512),[[o.nr,Y.customWeekly]]),(0,i._)("button",{class:(0,a.C_)(["btn btn-outline-success",{disabled:!Y.customWeekly}]),type:"button",id:"button-addon2",onClick:t[2]||(t[2]=(...e)=>K.addCustomWeekly&&K.addCustomWeekly(...e))}," Add custom weekly ",2)])):(0,i.kq)("",!0),(0,i._)("ul",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)([...this.$store.getters.checklistWeeklies],(e=>((0,i.wg)(),(0,i.j4)(Z,{key:e.name,item:e,type:"weekly",showHidden:Y.showHidden,draggable:Y.showHidden,onDragstart:t=>K.startDrag(t,e),onDragend:t[3]||(t[3]=e=>K.endDrag()),onDragleave:t[4]||(t[4]=e=>K.endDrag()),onDrop:t=>K.onDrop(t,e),onDragover:[t=>K.onDragOver(t,e),t[5]||(t[5]=(0,o.iM)((()=>{}),["prevent"]))],onDragenter:t[6]||(t[6]=(0,o.iM)((()=>{}),["prevent"])),dragHovered:e.name==this.draggedOverName},null,8,["item","showHidden","draggable","onDragstart","onDrop","onDragover","dragHovered"])))),128))]),f]),(0,i._)("div",C,[v,(0,i._)("span",$,(0,a.zw)(Y.dailyReset)+" until reset",1),Y.showHidden?((0,i.wg)(),(0,i.iD)("div",_,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>Y.customDaily=e),type:"text",class:"form-control",placeholder:"Custom daily"},null,512),[[o.nr,Y.customDaily]]),(0,i._)("button",{class:(0,a.C_)(["btn btn-outline-success",{disabled:!Y.customDaily}]),type:"button",id:"button-addon2",onClick:t[8]||(t[8]=(...e)=>K.addCustomDaily&&K.addCustomDaily(...e))}," Add custom daily ",2)])):(0,i.kq)("",!0),(0,i._)("ul",H,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)([...this.$store.getters.checklistDailies],(e=>((0,i.wg)(),(0,i.j4)(Z,{key:e.ID,item:e,type:"daily",showHidden:Y.showHidden,draggable:Y.showHidden,onDragstart:t=>K.startDrag(t,e),onDragend:t[9]||(t[9]=e=>K.endDrag()),onDragleave:t[10]||(t[10]=e=>K.endDrag()),onDrop:t=>K.onDrop(t,e),onDragover:[t=>K.onDragOver(t,e),t[11]||(t[11]=(0,o.iM)((()=>{}),["prevent"]))],onDragenter:t[12]||(t[12]=(0,o.iM)((()=>{}),["prevent"])),dragHovered:e.name==this.draggedOverName},null,8,["item","showHidden","draggable","onDragstart","onDrop","onDragover","dragHovered"])))),128))]),b,(0,i._)("span",T,[1==this.$store.getters.checklistLenHiddens?((0,i.wg)(),(0,i.iD)("span",x,[(0,i.Uk)(" 1 hidden task"),A,R])):this.$store.getters.checklistLenHiddens>1?((0,i.wg)(),(0,i.iD)("span",W,[(0,i.Uk)((0,a.zw)(this.$store.getters.checklistLenHiddens)+" hidden tasks",1),U,I])):(0,i.kq)("",!0)])])]),Y.showHidden||this.$store.getters.checklistAdhocs.length>0?((0,i.wg)(),(0,i.iD)("div",M,[(0,i._)("div",q,[N,O,Y.showHidden?((0,i.wg)(),(0,i.iD)("div",z,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>Y.customAdhoc=e),type:"text",class:"form-control",placeholder:"Custom item"},null,512),[[o.nr,Y.customAdhoc]]),(0,i._)("button",{class:(0,a.C_)(["btn btn-outline-success",{disabled:!Y.customAdhoc}]),type:"button",id:"button-addon2",onClick:t[14]||(t[14]=(...e)=>K.addCustomAdhoc&&K.addCustomAdhoc(...e))}," Add custom item ",2)])):(0,i.kq)("",!0),(0,i._)("ul",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)([...this.$store.getters.checklistAdhocs],(e=>((0,i.wg)(),(0,i.j4)(Z,{key:e.ID,item:e,type:"adhoc",showHidden:Y.showHidden,draggable:Y.showHidden,onDragstart:t=>K.startDrag(t,e),onDragend:t[15]||(t[15]=e=>K.endDrag()),onDragleave:t[16]||(t[16]=e=>K.endDrag()),onDrop:t=>K.onDrop(t,e),onDragover:[t=>K.onDragOver(t,e),t[17]||(t[17]=(0,o.iM)((()=>{}),["prevent"]))],onDragenter:t[18]||(t[18]=(0,o.iM)((()=>{}),["prevent"])),dragHovered:e.name==this.draggedOverName},null,8,["item","showHidden","draggable","onDragstart","onDrop","onDragover","dragHovered"])))),128)),0==this.$store.getters.checklistAdhocs.length?((0,i.wg)(),(0,i.iD)("li",G," Once you add checklist items, they will appear here ")):(0,i.kq)("",!0)]),S])])):(0,i.kq)("",!0)])}var Y=s(665);const K={key:0,class:"user-select-none"},L={key:1,class:"d-flex justify-content-between align-items-center"},Z=(0,i._)("i",{class:"fa-fw fad fa-grip-lines cursor-grab d-none d-md-inline",title:"Drag to reorder"},null,-1),B={key:0},E=(0,i._)("i",{class:"fa-fw fad fa-trash-alt"},null,-1),P=(0,i._)("span",{class:"tt-text"},"Remove",-1),F=[E,P],J=(0,i._)("i",{class:"fa-fw fad fa-eye-slash"},null,-1),Q=(0,i._)("span",{class:"tt-text"},"Show",-1),X=[J,Q],ee=(0,i._)("i",{class:"fa-fw fad fa-eye"},null,-1),te=(0,i._)("span",{class:"tt-text"},"Hide",-1),se=[ee,te];function ie(e,t,s,o,r,l){return s.showHidden||!r.itemCopy.hidden&&!s.showHidden?((0,i.wg)(),(0,i.iD)("li",{key:0,class:(0,a.C_)(["list-group-item cursor-pointer",{"drag-hovered":s.dragHovered,"list-group-item-action":this.$store.getters.hasCharacter}]),onClick:t[3]||(t[3]=(...e)=>l.check&&l.check(...e)),onMouseover:t[4]||(t[4]=e=>r.isHovering=!0),onMouseout:t[5]||(t[5]=e=>r.isHovering=!1)},[r.itemCopy.hidden||s.showHidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",K,[!s.showHidden&&this.$store.getters.hasCharacter?((0,i.wg)(),(0,i.iD)("i",{key:0,class:(0,a.C_)(["me-2 fa-fw fal",{"fa-check-circle":r.itemCopy.checked||r.isHovering,"fa-circle":!r.itemCopy.checked&&!r.isHovering,"text-success":r.itemCopy.checked}])},null,2)):(0,i.kq)("",!0),(0,i._)("span",{class:(0,a.C_)({"checklist-checked":r.itemCopy.checked})},(0,a.zw)(s.item.name),3)])),s.showHidden?((0,i.wg)(),(0,i.iD)("span",L,[(0,i._)("span",{class:(0,a.C_)([{"text-muted":r.itemCopy.hidden},"user-select-none"])},[Z,(0,i.Uk)(" Â  "+(0,a.zw)(s.item.name),1)],2),s.showHidden?((0,i.wg)(),(0,i.iD)("span",B,[s.item.custom?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"text-danger cursor-pointer tt",onClick:t[0]||(t[0]=(...e)=>l.remove&&l.remove(...e))},F)):r.itemCopy.hidden?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"text-secondary cursor-pointer tt",onClick:t[1]||(t[1]=(...e)=>l.hid&&l.hid(...e))},X)):r.itemCopy.hidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:2,class:"text-success cursor-pointer tt",onClick:t[2]||(t[2]=(...e)=>l.hid&&l.hid(...e))},se))])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],34)):(0,i.kq)("",!0)}var ae=s(26),oe={data(){return{itemCopy:this.item,isHovering:!1}},props:{item:Object,type:String,showHidden:Boolean,dragHovered:Boolean},watch:{item(){this.itemCopy=this.item}},methods:{hid(){this.itemCopy.hidden=!this.itemCopy.hidden,this.updateItem(!1)},check(){this.$store.getters.hasCharacter&&(this.showHidden||(this.itemCopy.checked=!this.itemCopy.checked,this.updateItem(!1)))},remove(){this.updateItem(!0)},updateItem(e){if("weekly"==this.type){let t=this.$store.getters.checklistWeeklies;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistWeeklies",t)}if("daily"==this.type){let t=this.$store.getters.checklistDailies;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistDailies",t)}if("adhoc"==this.type){let t=this.$store.getters.checklistAdhocs;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistAdhocs",t)}let t=this.$store.getters.lodestoneData.Character.ID;(0,ae.Ge)(t,this.$store.getters.checklistData)}}},re=s(744);const le=(0,re.Z)(oe,[["render",ie]]);var ne=le,de=s(15),ce={name:"ChecklistView",data(){return{showHidden:!1,weeklyReset:this.formatTimeDiff(this.weeklyResetTime(),!0),dailyReset:this.formatTimeDiff(this.dailyResetTime(),!1),customWeekly:"",customDaily:"",customAdhoc:"",draggedOverName:""}},components:{AlertMsg:Y.Z,ChecklistItem:ne},mounted(){this.$nextTick((function(){this.resetDailliesWeeklies()})),setInterval((()=>{this.resetDailliesWeeklies()}),1e3)},methods:{weeklyResetTime(){let e=new Date,t=new Date;t.setUTCHours(8,0,0),t.setUTCDate(e.getUTCDate()+(9-e.getUTCDay()));let s=t-e,i=6048e5;return s%i+e.getTime()},dailyResetTime(){let e=new Date,t=new Date;t.setUTCHours(15,0,0),t.setUTCDate(t.getUTCDate()+1);let s=t-e,i=864e5;return s%i+e.getTime()},formatTimeDiff(e,t){let s=new Date,i=e-s,a=864e5,o=36e5,r=6e4,l=1e3,n=Math.floor(i/a),d=Math.floor(i/o)-24*Math.floor(i/a),c=Math.floor(i/r)-60*Math.floor(i/o),h=Math.floor(i/l)-60*Math.floor(i/r);return n>0&&t?`${n}d ${d}h`:d>0?`${d}h ${c}m`:`${c}m ${h}s`},resetDailliesWeeklies(){this.weeklyReset=this.formatTimeDiff(this.weeklyResetTime(),!0),this.dailyReset=this.formatTimeDiff(this.dailyResetTime(),!1);let e=!1;if(this.$store.getters.hasCharacter){if(this.$store.getters.checklistNextWeeklyReset<Date.now()){e=!0,this.$store.commit("checklistNextWeeklyReset",this.weeklyResetTime());let t=this.$store.getters.checklistWeeklies;for(let e=0;e<t.length;e++)t[e].checked=!1}if(this.$store.getters.checklistNextDailyReset<Date.now()){e=!0,this.$store.commit("checklistNextDailyReset",this.dailyResetTime());let t=this.$store.getters.checklistDailies;for(let e=0;e<t.length;e++)t[e].checked=!1}if(e){let e=this.$store.getters.lodestoneData.Character.ID;(0,ae.Ge)(e,this.$store.getters.checklistData)}}},addCustomWeekly(){let e={name:this.customWeekly,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistWeeklies];t.push(e),this.$store.commit("setChecklistWeeklies",t),this.customWeekly="";let s=this.$store.getters.lodestoneData.Character.ID;(0,ae.Ge)(s,this.$store.getters.checklistData)},addCustomDaily(){let e={name:this.customDaily,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistDailies];t.push(e),this.$store.commit("setChecklistDailies",t),this.customDaily="";let s=this.$store.getters.lodestoneData.Character.ID;(0,ae.Ge)(s,this.$store.getters.checklistData)},addCustomAdhoc(){let e={name:this.customAdhoc,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistAdhocs];t.push(e),this.$store.commit("setChecklistAdhocs",t),this.customAdhoc="";let s=this.$store.getters.lodestoneData.Character.ID;(0,ae.Ge)(s,this.$store.getters.checklistData)},startDrag(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("itemName",t.name)},endDrag(){this.draggedOverName=""},onDrop(e,t){let s=e.dataTransfer.getData("itemName"),i=t.name;if(i==s)return;(0,de.zT)(s,i);let a=this.$store.getters.lodestoneData.Character.ID;(0,ae.Ge)(a,this.$store.getters.checklistData)},onDragOver(e,t){this.draggedOverName=t.name}}};const he=(0,re.Z)(ce,[["render",V]]);var me=he}}]);
//# sourceMappingURL=checklist.7c58fb89.js.map